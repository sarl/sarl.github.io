<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="shortcut icon" href="../../../../images/favicon.ico">
<link rel="icon" href="../../../../images/favicon.ico">
<meta charset="utf-8">
<title>Agent Reference</title>
<meta name="description" content="">
<meta name="author" content="Jnario">

<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<link rel="stylesheet" href="../../../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../../../css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="../../../../css/custom.css">
<link rel="stylesheet" href="../../../../css/prettify.css">
<script type="text/javascript" src="../../../../js/prettify.js"></script>
<script type="text/javascript" src="../../../../js/lang-jnario.js"></script>
<script type="text/javascript" src="../../../../js/jquery.js"></script>
<script type="text/javascript" src="../../../../js/bootstrap-tab.js"></script>
</head>

<body onload="prettyPrint()">

<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.sarl.io">SARL</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="../../../../index.html">Home</a></li>
        <li><a href="../../../../docs/index.html">Documentation</a></li>
        <li><a href="../../../../download/index.html">Download</a></li>
        <li><a href="../../../../runtime/index.html">Run-time</a></li>
        <li><a href="../../../../news/index.html">News &amp; Events</a></li>
        <li><a href="../../../../publications/index.html">Publications &amp; Presentations</a></li>
        <li><a href="../../../../about/index.html">About</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</div>
<div class="container">
<h1>Agent Reference</h1>
<ul class="page_outline" id="page_outline">
<li><a href="#Where_is_living_an_agent">1. Where is living an agent?</a></li>
<li><a href="#Open_Architecture_of_an_Agent">2. Open Architecture of an Agent</a></li>
<li><a href="#Defining_an_Agent">3. Defining an Agent</a></li>
<li><a href="#Behaviors_of_an_Agent">4. Behaviors of an Agent</a></li>
<li><a href="#Capacities_and_Skills">5. Capacities and Skills</a></li>
<li><a href="#Legal_Notice">6. Legal Notice</a></li>
</ul>
<p>This document describes the features related to the definition of an agent in SARL. Before reading this document, it is recommended reading the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, the <a href="SkillReferenceSpec.html">Skill Reference</a>, and the <a href="BuiltInCapacityReferenceSpec.html">Built-in Capacity Reference</a>.</p>
<p><strong>An agent is an autonomous entity having a set of skills to realize the capacities it exhibits</strong>.</p>
<h3 id="Where_is_living_an_agent">1. Where is living an agent?</h3>
<p>Before detailing the architecture and the definition tools of an agent, it may be helpful to understand where is "living" an agent in the multi-agent system.</p>
<p>The following figure illustrates the position of an agent (at the center of the figure) in different contexts. The details are discussed below. </p>
<center><img src="./contexts.png"></center>
<h4 id="Default_Context">1.1. Default Context</h4>
<p>When it is spawn, an agent is living inside the system in a place named "<em>Context</em>".</p>
<p><strong>A Context defines the boundary of a sub-system, and gathers a collection of spaces</strong>. A Space is the support of the interaction between agents respecting the rules defined in the spaces' specification.</p>
<p><span class="label label-warning">Important</span> In each context, there is at least one particular space called <em>Default Space</em> to which all agents in this context belong.</p>
<p>It ensures the existence of a common shared space to all agents in the same context. Each agent can then create specific public or private spaces to achieve its personal goals (the blue space on the figure above).</p>
<p><span class="label label-warning">Important</span> Since their creation, agents are incorporated into a context called the <strong>Default Context</strong>. It is important to notice that the <em>Default Context</em> is not necessarily the same for every agent.</p>
<p>An agent has an identifier for each space it is involved in. For the case of event-based interaction spaces, this identifier is called "address".</p>
<h4 id="External_Contexts">1.2. External Contexts</h4>
<p>During its lifetime, an agent may join and participate in other contexts that are not the default context. They are called the external contexts of the agent.</p>
<p><span class="label label-info">Note</span> There is no restriction about the number of contexts in which an agent is belonging to, except that it is always in its default context.</p>
<p>For joining or leaving a context, the agent must use the <code>ExternalContextAccess</code> built-in capacity. It is detailed in the <a href="BuiltInCapacityReferenceSpec.html">Built-in Capacity Reference</a>.</p>
<h4 id="From_Flat_to_Hierarchical_System_with_the_Inner_Context">1.3. From Flat to Hierarchical System with the Inner Context</h4>
<p>In 1967, Arthur Koestler coined the term <em>holon</em> as an attempt to conciliate holistic and reductionist visions of the world. A holon represents a part-whole construct that can be seen as a component of a higher level system or as whole composed of other self-similar holons as substructures.</p>
<p>Holonic Systems grew from the need to find comprehensive construct that could help explain social phenomena. Since then, it came to be used in a wide range of domains, including Philosophy, Manufacturing Systems, and Multi-Agents Systems.</p>
<p>Several works have studied this question and they have proposed a number of models inspired from their experience in different domains. In many cases, we find the idea of <em>agents composed of other agents</em>.</p>
<p>More recently, the importance of holonic multi-agent systems has been recognized by different methodologies such as <a href="http://www.aspecs.org">ASPECS</a> or O-MASE.</p>
<p><span class="label label-info">Note</span> In SARL, we recognize that agents can be composed of other agents. Therefore, SARL agents are in fact holons that can compose each other to define hierarchical or recursive multi-agent system, called holarchies.</p>
<p>In order to achieve this, SARL agents are self-similar structures that compose each other via their contexts. Each agent defines its own context, called <strong>Inner Context</strong>. Because this inner context may be joined by other agents, or agents may be spawn inside this inner context, it is possible to build a holarchy.</p>
<p><span class="label label-danger">Important</span> An agent is always a participant of the default space of its inner space.</p>
<p><span class="label label-warning">Note</span> The unique identifier (usually a Unique Universal Identifier) of the inner context is equal to the unique identifier of its owning agent.</p>
<h4 id="Universe_Agent_and_Universe_Context">1.4. Universe Agent and Universe Context</h4>
<p>At the top level of the holarchy, we consider an omnipresent agent. It is named the <strong>Universe Agent</strong> (or <em>Root Agent</em>). The runtime environment will be in charge of spawning the first agents in the system as members of the Universe Agent.</p>
<p>The inner context of the Universe Agent is called the Universe Context, or the Janus Context if you are using the <a href="http://www.janusproject.io">Janus runtime environment</a>.</p>
<h3 id="Open_Architecture_of_an_Agent">2. Open Architecture of an Agent</h3>
<p>The architecture of an agent is illustrated by the following figure.</p>
<center><img src="./agent.png"></center>
<h4 id="Built_in_Capacities">2.1. Built-in Capacities</h4>
<p>An agent has a set of built-in capacities considered essential to respect the commonly accepted competencies of agents, such autonomy, reactivity, pro-activity and social capacities.</p>
<p>The full set of Built-in Capacities will be presented in the corresponding <a href="BuiltInCapacityReferenceSpec.html">Reference document</a>. Among these built-in capacities, is the <code>Behaviors</code> capacity that enables agents to incorporate a collection of behaviors that will determine its global conduct.</p>
<h4 id="Agent_Behaviors">2.2. Agent Behaviors</h4>
<p>An agent has also a default behavior directly described within its definition.</p>
<p><strong>A Behavior maps a collection of perceptions represented by Events to a sequence of Actions.</strong> The various behaviors of an agent communicate using an event-driven approach.</p>
<p><strong>An Event is the specification of some occurrence in a Space that may potentially trigger effects by a listener</strong> (e.g., agent, behavior, etc.)</p>
<h3 id="Defining_an_Agent">3. Defining an Agent</h3>
<p>An agent is declared with the <code>agent</code> keyword. In the agent's body block, we can declare Mental States (in the form of attributes), Actions and Behaviors.</p>
<h4 id="Defining_an_empty_agent">3.1. Defining an empty agent</h4>
<p>The following code illustrates the definition of an agent named <code>MyAgent</code>, and that is empty.</p>
<p>Basically, this agent does nothing, and does not react on events.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
}</pre>
<h4 id="Agent_Attributes">3.2. Agent Attributes</h4>
<p>The mental state of an agent is composed by the data in the knowledge of the agent. Most of the time, the mental state is implemented as a collection of attributes in the agent.</p>
<p>According to the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, the attributes may be modifiable (when declared with the <code>var</code> keyword), or unmodifiable (when declared with the <code>val</code> keyword).</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  // Defining a modifiable element of the mental state
  var mentalStateElement1 : String
  // Defining an unmodifiable element of the mental state
  val mentalStateElement2 : boolean = true
}</pre>
<h4 id="Agent_Actions">3.3. Agent Actions</h4>
<p>It is allowed to define actions (methods) in the agent. The syntax described is described in the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>.</p>
<p>The example below illustrates the creation of two actions in the agent.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  // Defining an action without parameter nor return type
  def myAction1 {
    println("Hello world")
  }
  // Defining an action with a variadic parameter and no return type
  def myAction2(param : int*) {
    println("params are " + param)
  }
}</pre>
<h4 id="Extending_an_Agent">3.4. Extending an Agent</h4>
<p>In some use cases, it is useful to specialize the definition of an agent. This mechanism is supported by the inheritance feature of SARL, which has the same semantic as the inheritance mechanism as the Java object-oriented language.</p>
<p>The extended agent is specified just after the <code>extends</code> keyword.</p>
<p><span class="label label-danger">Important</span> An agent type can extend <strong>only one</strong> other agent type. This is close to the constraint on the extension of classes in the Java language.</p>
<p>In the following code, a first agent is defined with the name <code>MyAgent</code> and an attribute named <code>attr</code>. A second agent <code>MySubAgent</code> is defined as the extension of the first agent. It contains a function named <code>action</code>, which is displaying the inherited attribute.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  var attr : String
}
agent MySubAgent extends MyAgent {
  def action {
    println(attr)
  }
}</pre>
<h3 id="Behaviors_of_an_Agent">4. Behaviors of an Agent</h3>
<p>The behaviors of an agent correspond to the units that are executed by the agent for exhibiting its general behavior.</p>
<p>The execution of the behaviors are related to the life cycle of the agents. Every agent is following the steps:</p>
<ul>
  <li>Initialization: the agent react on the <code>Initialize</code> event;</li>
  <li>Lifetime: the agent execute its behaviors. They may be:</li>
  <li>
  <ul>
    <li>reactive: the agent react when it is receiving events, or</li>
  </ul>
</li>
  <li>
  <ul>
    <li>proactive: the agent executes by itself one of its behaviors.</li>
  </ul>
</li>
  <li>Destruction: the agent react on the <code>Destroy</code> event.</li>
</ul>
<p>The definition of the reactive behaviors is based on the event handling mechanism of SARL. Events may be emitted in <a href="SpaceReferenceSpec.html">spaces</a>, and received by the agents belonging to these spaces. An agent may indicate that it is interesting for receiving an event by specifying an event handler using the following syntax:</p>
<pre class="prettyprint">on &lt;EventName&gt; [&lt;Guard&gt;] {
       &lt;Statements&gt;
}
</pre>
<p><code>&lt;EventName&gt;</code> is the name of the events to wait for. <code>&lt;Guard&gt;</code> is the optional definition of a predicate that may be true for executing the <code>&lt;Statements&gt;</code>. The statements are executed only if an event with the given name is received, <strong>and</strong> if the guard is true.</p>
<p>In the guard and the statements, it is possible to use the instance of the received event: the occurrence. This instance is represented by the <code>occurrence</code> keyword. It is an implicit variable as the keywords <code>this</code> and <code>it</code>.</p>
<h4 id="Initialization_Handler">4.1. Initialization Handler</h4>
<p>When an agent is ready to be executed by the runtime environment, it receives the <code>Initialize</code> event. This event is defined as:</p>
<pre class="prettyprint">event Initialize {
    var parameters : Object[]
}
</pre>
<p>It contains the list of the parameters given to the spawning function (as specified in the <a href="BuiltInCapacityReferenceSpec.html">built-in capacities</a>).</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on Initialize {
    println(
      "My initialization parameters are: "
      + occurrence.parameters )
  }
}</pre>
<h4 id="Guarded_Initialization_Handler">4.2. Guarded Initialization Handler</h4>
<p>Because <code>Initialize</code> is an event, the handler in the agent could use a guard. This feature enables the developer to write different initialization blocks depending on the guards of the handlers.</p>
<p>In the following example, the first event handler is executed when the <code>Initialize</code> event has no parameter. The second event handler is executed when the event has at least one parameter.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on Initialize [ occurrence.parameters.empty ] {
    println("Initialization without parameters")
  }
  on Initialize [ ! occurrence.parameters.empty ] {
    println("Initialization with parameters: "
      + occurrence.parameters )
  }
}</pre>
<h4 id="Destruction_Handler">4.3. Destruction Handler</h4>
<p>The counterpart of <code>Initialize</code> is the event <code>Destroy</code>. This event is defined as:</p>
<pre class="prettyprint">event Destroy
</pre>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on Destroy {
    println("Destroying the agent")
  }
}</pre>
<h4 id="Guarded_Destruction_Handler">4.4. Guarded Destruction Handler</h4>
<p>As for <code>Initialize</code>, the handlers of the <code>Destroy</code> event could be guarded.</p>
<p>In the following example, the first event handler is executed when the <code>Destroy</code> is received and there is resource stored in the corresponding field. The second event handler is executed when there is no resource.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  var resource : Object
  on Destroy [ resource !== null ] {
    println("Destroying the agent when there is a resource")
  }
  on Destroy [ resource === null ] {
    println("Destroying the agent when there is no resource")
  }
}</pre>
<h4 id="Reactive_Behaviors">4.5. Reactive Behaviors</h4>
<p>The reactive behavior of an agent is specified with a collection of event handlers. The principle of a reactive behavior is to execute a part of the global agent behavior when something has happening in the agent, or in its environment.</p>
<p>In the following example, the agent is reacting to the reception of the <code>SomethingChanged</code> event.</p>
<p>As for all the event handlers, it could be guarded by a predicate.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on SomethingChanged {
    println("Reactive behavior")
  }
}</pre>
<h4 id="Parallel_Execution_of_the_Reactive_Behaviors">4.6. Parallel Execution of the Reactive Behaviors</h4>
<p>When an event is received and the guard of the corresponding handler is true, the event handler is said to be triggered.</p>
<p>When multiple event handlers are triggered at the same time, they are all executed in parallel. In the following example, the two handlers for the <code>SomethingChanged</code> event are executed in parallel.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on SomethingChanged {
    println("First reactive behavior")
  }
  on SomethingChanged {
    println("Second reactive behavior")
  }
}</pre>
<h4 id="Pro_active_Behaviors">4.7. Pro-active Behaviors</h4>
<p>A proactive behavior is a part of the global behavior of an agent that the agent is deciding to execute by itself. The execution of a reactive behavior is initiated by a part of the code external to this behavior. In opposite, the initiator of the execution of a proactive behavior is the agent itself.</p>
<p>In SARL, a proactive behavior is a behavior that is scheduled by the agent. The scheduling mechanism is provided by the <a href="BuiltInCapacityReferenceSpec.html"><code>Schedules</code> built-in capacity</a>. In the following example, the agent execute its proactive behavior every second.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  uses Schedules
  on Initialize {
    every(1000) [
      println("Run a pro-active behavior")
    ]
  }
}</pre>
<h3 id="Capacities_and_Skills">5. Capacities and Skills</h3>
<p>An agent is an autonomous entity having a set of skills to realize the capacities it exhibits. An agent has a set of built-in capacities considered essential to respect the commonly accepted competencies of agents, such autonomy, reactivity, pro-activity and social capacities.</p>
<h4 id="Defining_a_Capacity_and_a_Skill">5.1. Defining a Capacity and a Skill</h4>
<p>The definition of a capacity or a skill is out of the scope of this reference document. For details, please read the <a href="CapacityReferenceSpec.html">Capacity Reference</a>, and the <a href="SkillReferenceSpec.html">Skill Reference</a>.</p>
<p>In the rest of this section, it is assumed that the following capacity and skill are defined:</p>
<pre class="prettyprint">capacity Cap {
    def action
}
skill Ski implements Cap {
    def action {
        println("Action")
    }
}
</pre>
<h4 id="Giving_a_Skill_to_an_Agent">5.2. Giving a Skill to an Agent</h4>
<p>When an agent must use a capacity in one of its behaviors, it must own an implementation of this capacity: a skill.</p>
<p>For assigning a skill to an agent, the instance of the skill must be created. Then, it is associated with the implemented capacity. In the following example, the agent is creating the <code>Ski</code> skill. This instance is associated with the corresponding capacity <code>Cap</code> with the function <code>setSkill(Class&lt;? extends Capacity&gt;, Skill)</code>.</p>
<p>When the function <code>setSkill</code> is returning, the agent becomes able to use the skill.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on Initialize {
    var theSkill = new Ski
    setSkill( Cap, theSkill )
  }
}</pre>
<h4 id="Giving_a_Built_in_Skill_to_an_Agent">5.3. Giving a Built-in Skill to an Agent</h4>
<p>Because the built-in capacities are supported by the runtime environment, the corresponding skills are given to the agent. It means that there is no need for an agent to set a skill for a built-in capacity.</p>
<p>However, in rare cases, it is possible to use the function <code>setSkill(Class&lt;? extends Capacity&gt;, Skill)</code> for changing the implementation of a built-in capacity.</p>
<h4 id="Using_a_Capacity_with_the_Getters">5.4. Using a Capacity with the Getters</h4>
<p>After a skill is registered into the agent, it could be invoked.</p>
<p>For invoking a function implemented by a skill, the two following steps must be done:</p>
<ul>
  <li>Retrieve the skill instance: the function  <code>getSkill(Class&lt;? extends Capacity&gt;)</code>  permits retrieving the skill associated to the given capacity;</li>
  <li>Invoke the capacity's action on the retrieved skill.</li>
</ul>
<p><span class="label label-info">Note</span> This method of invocation is not recommended by the SARL developers. You should prefer the use of the extension methods (see below).</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on Initialize {
    var s = new Ski
    setSkill( Cap, s )
  }
  on SomeEvent {
    // Retreive the capacity implementation
    var s = getSkill(Cap)
    // Run the action of the skill
    s.action
  }
}</pre>
<h4 id="Using_a_Built_in_Capacity_with_the_Getters">5.5. Using a Built-in Capacity with the Getters</h4>
<p>The built-in capacities are accessible in the same way as the other capacities, with the getters.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  on SomeEvent {
    // Retreive the capacity implementation
    var s = getSkill(Lifecycle)
    // Run the action of the skill
    s.killMe
  }
}</pre>
<h4 id="Using_a_Capacity_with_the_Extension_Methods">5.6. Using a Capacity with the Extension Methods</h4>
<p>Invoking a capacity/skill with the getter method is not user-friendly. Since the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a> describes the "extension method" mechanism, it is possible to use it for invoking the capacities.</p>
<p>But, instead of using an <code>import</code> directive, the <code>uses</code> keyword is provided for importing the capacities into the agent. In the following example, the <code>Cap</code> capacity is imported.</p>
<p>After a capacity was "imported", it is possible to directly call the functions of the capacity (according to the extension method syntax). In the following example, the action with the name <code>action</code> is invoked. This action is defined in the <code>Cap</code> capacity.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  uses Cap
  on Initialize {
    var s = new Ski
    setSkill( Cap, s )
  }
  on SomeEvent {
    // Run the action of the skill
    action
  }
}</pre>
<h4 id="Using_a_Built_in_Capacity_with_the_Extension_Methods">5.7. Using a Built-in Capacity with the Extension Methods</h4>
<p>The built-in capacities are accessible in the same way as the other capacities, with the extension methods.</p>
<pre class="prettyprint lang-spec linenums">agent MyAgent {
  uses Lifecycle
  on SomeEvent {
    // Run the action of the skill
    killMe
  }
}</pre>
<h3 id="Legal_Notice">6. Legal Notice</h3>
<p>Specification: SARL General-purpose Agent-Oriented Programming Language ("Specification")<br> Version: %sarlspecversion%<br> Status: %sarlspecreleasestatus%<br> Release: %sarlspecreleasedate%</p>
<p>Copyright © %copyrightdate% %copyrighters%. All rights reserved.</p>
							<div>
<hr>
<p><small>SARL Documentation is generated by <a href="http://www.jnario.org" target="_blank">Jnario</a></small></p>
</div>
</div>
<div class="container">
  <!-- FOOTER -->
  <footer>
    <div class="row">
      
    <div class="col-lg-3">
    <div class="well well-sm">
      
      <center>
      <h2>SARL</h2>
      <div>Agent-Oriented Programming Language</div>
      <img src="../../../../images/SARL-logo.png" style="width:30%;max-width:64px;"><br>
      <small><a href="../../../../images/SARL-logo.png">png</a> · <a href="../../../../images/SARL-logo.svg">svg</a></small>
      </center>
    </div>
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2>
<i class="glyphicon glyphicon-th-large"></i> Quick Links </h2> 
      <ul>
        <li><a href="../../../../news/index.html">SARL News</a></li>
        <li><a href="../../../../about/index.html">About SARL</a></li>
        <li><a href="../../../../about/index.html">License</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2>
<i class="glyphicon glyphicon-cog"></i> Support</h2>
      <ul>
        <li><a href="http://github.com/sarl/sarl">View on Github</a></li>
        <li><a href="http://github.com/sarl/sarl/issues">Report an Issue</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2>
<i class="glyphicon glyphicon-link"></i> Links</h2>
      <ul>
        <li><a href="http://www.janusproject.io">Janus Project</a></li>
        <li><a href="http://www.gitia.org">GITIA - FRT - UTN</a></li>
        <li><a href="http://www.multiagent.fr">MAS Group - IRTES - UTBM</a></li>
      </ul>
      </div> 
    </div>
    </div>
    
  </footer>
</div>
</body>
</html>
