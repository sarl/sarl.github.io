<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="shortcut icon" href="../../../../images/favicon.ico">
<link rel="icon" href="../../../../images/favicon.ico">
<meta charset="utf-8">
<title>Behavior Reference</title>
<meta name="description" content="">
<meta name="author" content="Jnario">

<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<link rel="stylesheet" href="../../../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../../../css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="../../../../css/custom.css">
<link rel="stylesheet" href="../../../../css/prettify.css">
<script type="text/javascript" src="../../../../js/prettify.js"></script>
<script type="text/javascript" src="../../../../js/lang-jnario.js"></script>
<script type="text/javascript" src="../../../../js/jquery.js"></script>
<script type="text/javascript" src="../../../../js/bootstrap-tab.js"></script>
</head>

<body onload="prettyPrint()">

<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.sarl.io">SARL</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="../../../../index.html">Home</a></li>
        <li><a href="../../../../docs/index.html">Documentation</a></li>
        <li><a href="../../../../download/index.html">Download</a></li>
        <li><a href="../../../../runtime/index.html">Run-time</a></li>
        <li><a href="../../../../news/index.html">News &amp; Events</a></li>
        <li><a href="../../../../publications/index.html">Publications &amp; Presentations</a></li>
        <li><a href="../../../../about/index.html">About</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</div>
<div class="container">
<h1>Behavior Reference</h1>
<ul class="page_outline" id="page_outline"><li><a href="#Defining_a_Behavior">Defining a Behavior</a></li><li><a href="#Behavior_Units_of_a_Behavior">Behavior Units of a Behavior</a></li><li><a href="#Capacities_and_Skills">Capacities and Skills</a></li></ul><p>This document describes the features related to the definition of a behavior in SARL. Before reading this document, it is recommended reading the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, and the <a href="AgentReferenceSpec.html">Agent Reference</a>.</p>
<p>A <code>Behavior</code> is the specification of a collection of behavior units. This <code>Behavior</code> may be used by an agent for building its global behavior.</p>
<h3 class="exampleGroup passed" id="Defining_a_Behavior">Defining a Behavior</h3>
<p>A behavior is declared with the <code>behavior</code> keyword. In the behavior's body block, we can declare Mental States (in the form of attributes), Actions and Behaviors.</p>
<ul>
<li>
<p id="Defining_an_empty_behavior" class="example passed"><strong>Defining an empty behavior</strong></p>
<p>The following code illustrates the definition of a behavior named <code>MyBehavior</code>, and that is empty.</p>
<p>Basically, this behavior does nothing, and does not react on events.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
}</pre>
</li>
<li>
<p id="Behavior_Attributes" class="example passed"><strong>Behavior Attributes</strong></p>
<p>The mental state of an agent is composed by the data in the knowledge of the agent. A behavior may contain a part of this mental state. Most of the time, it is implemented as a collection of attributes.</p>
<p>According to the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, the attributes may be modifiable (when declared with the <code>var</code> keyword), or unmodifiable (when declared with the <code>val</code> keyword).</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  // Defining a modifiable element of the mental state
  var mentalStateElement1 : String
  // Defining an unmodifiable element of the mental state
  val mentalStateElement2 : boolean = true
}</pre>
</li>
<li>
<p id="Behavior_Actions" class="example passed"><strong>Behavior Actions</strong></p>
<p>It is allowed to define actions (methods) in the behavior. The syntax described in the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a> is used.</p>
<p>The example below illustrates the creation of type actions.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  // Defining an action without parameter nor return type
  def myAction1 {
    println("Hello world")
  }
  // Defining an action with a variadic parameter and no return type
  def myAction2(param : int*) {
    println("params are " + param)
  }
}</pre>
</li>
<li>
<p id="Extending_a_Behavior" class="example passed"><strong>Extending a Behavior</strong></p>
<p>In some use cases, it is useful to specialize the definition of a behavior. This mechanism is supported by the inheritance feature of SARL, which has the same semantic as the inheritance mechanism as the Java object-oriented language.</p>
<p>The extended behavior is specified just after the <code>extends</code> keyword.</p>
<p><span class="label label-danger">Important</span> A behavior type can extend <strong>only one</strong> other behavior type. This is close to the constraint on the extension of classes in the Java language.</p>
<p>In the following code, a first behavior is defined with the name <code>MyBehavior</code> and an attribute named <code>attr</code>. A second behavior <code>MySubBehavior</code> is defined as the extension of the first behavior. It contains a function named <code>action</code>, which is displaying the inherited attribute.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  var attr : String
}
behavior MySubBehavior extends MyBehavior {
  def action {
    println(attr)
  }
}</pre>
</li>
<li>
<p id="Instancing_and_Use_of_a_Behavior" class="example passed"><strong>Instancing and Use of a Behavior</strong></p>
<p>A behavior is always owned by an agent. Consequently, it is mandatory to pass the agent as parameter of the behavior's constructor.</p>
<p>In the following example, a behavior of type <code>MyBehavior</code> is instanced (with the agent as the owner/parameter). This new behavior is then registered into the agent for enabling the reception of the events in the behavior.</p>
<pre class="prettyprint lang-spec linenums">
agent MyAgent {
  uses Behaviors
  on Initialize {
    // Create the instance of the behavior
    var beh = new MyBehavior(this) // &lt;- the parameter is the agent
    
    // Register the behavior for receiving the events.
    // This function is given by the Behaviors capacity
    registerBehavior(beh)
  }
}</pre>
</li>
</ul>
<h3 class="exampleGroup passed" id="Behavior_Units_of_a_Behavior">Behavior Units of a Behavior</h3>
<p>The behaviors of an agent correspond to the units that are executed by the agent for exhibiting its general behavior.</p>
<p>The <code>Behavior</code> statement permits specifying a subset of the agent's behavior inside a single syntactic entity. Two types of behaviors are considered:</p>
<ul>
  <li>reactive: the agent react when it is receiving events, and</li>
  <li>pro-active: the agent executes by itself one of its behaviors.</li>
</ul>
<p>The definition of the reactive behaviors is based on the event handling mechanism of SARL. Events may be emitted in <a href="SpaceReferenceSpec.html">spaces</a>, and received by the agents, and their behaviors, belonging to these spaces. A behavior may indicate that it is interesting for receiving an event by specifying an event handler using the following syntax:</p>
<pre class="prettyprint">on &lt;EventName&gt; [&lt;Guard&gt;] {
    &lt;Statements&gt;
}
</pre>
<p><code>&lt;EventName&gt;</code> is the name of event to wait for. <code>&lt;Guard&gt;</code> is the optional specification of a predicate that may be true for executing the <code>&lt;Statements&gt;</code>. The statements are executed only if an event with the given name is received, <em>and</em> if the guard is true.</p>
<p>In the guard and the statements, it is possible to use the instance of the received event: the occurrence. This instance is represented by the <code>occurrence</code> keyword. It is an implicit variable as the keywords <code>this</code> and <code>it</code>.</p>
<ul>
<li>
<p id="Reactive_Behavior_Units" class="example passed"><strong>Reactive Behavior Units</strong></p>
<p>The reactive behavior is specified with a collection of event handlers. The principle of a reactive behavior is to execute a part of the behavior when something has happening in the behavior, the agent or in its environment.</p>
<p>In the following example, the behavior is reacting to the reception of the <code>SomethingChanged</code> event.</p>
<p>As for all the event handlers, it could be guarded by a predicate.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  on SomethingChanged {
    println("Reactive behavior")
  }
}</pre>
</li>
<li>
<p id="Parallel_Execution_of_the_Reactive_Behavior_Units" class="example passed"><strong>Parallel Execution of the Reactive Behavior Units</strong></p>
<p>When an event is received and the guard of the corresponding handler is true, the event handler is said to be triggered.</p>
<p>When multiple event handlers are triggered at the same time, they are all executed in parallel. In the following example, the two handlers for the <code>SomethingChanged</code> event are executed in parallel.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  on SomethingChanged {
    println("First reactive behavior")
  }
  on SomethingChanged {
    println("Second reactive behavior")
  }
}</pre>
</li>
<li>
<p id="Pro_active_Behavior_Units" class="example passed"><strong>Pro-active Behavior Units</strong></p>
<p>A proactive behavior is a part of the global behavior of an agent that the agent is deciding to execute by itself. The execution of a reactive behavior is initiated by a part of the code external to this behavior. In opposite, the initiator of the execution of a proactive behavior is the agent itself.</p>
<p>In SARL, a proactive behavior is a behavior that is scheduled by the agent or one of its behaviors. The schedule mechanism is provided by the <a href="BuiltInCapacityReferenceSpec.html"><code>Schedules</code> built-in capacity</a>. In the following example, the agent execute its proactive behavior every second.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  uses Schedules
  on Initialize {
    every(1000) [
      println("Run a pro-active behavior")
    ]
  }
}</pre>
</li>
</ul>
<h3 class="exampleGroup passed" id="Capacities_and_Skills">Capacities and Skills</h3>
<p>An agent is an autonomous entity having a set of skills to realize the capacities it exhibits. An agent has a set of built-in capacities considered essential to respect the commonly accepted competencies of agents, such autonomy, reactivity, pro-activity and social capacities.</p>
<p>Consequently, a behavior associated to an agent is able to use the skills of this agent.</p>
<ul>
<li>
<p id="Defining_a_Capacity_and_a_Skill" class="example passed"><strong>Defining a Capacity and a Skill</strong></p>
<p>The definition of a capacity or a skill is out of the scope of this reference document. For details, please read the <a href="CapacityReferenceSpec.html">Capacity Reference</a>, and the <a href="SkillReferenceSpec.html">Skill Reference</a>.</p>
<p>In the rest of this section, it is assumed that the following capacity and skill are defined:</p>
<pre class="prettyprint">capacity Cap {
    def action
}
skill Ski implements Cap {
    def action {
        println("Action")
    }
}
</pre>
</li>
<li>
<p id="Giving_a_Skill_to_the_Associated_Agent" class="example passed"><strong>Giving a Skill to the Associated Agent</strong></p>
<p>When a behavior must use a capacity, its agent must own an implementation of this capacity: a skill.</p>
<p>It is not possible for a behavior to assign a skill to the agent.</p>
</li>
<li>
<p id="Using_a_Capacity_with_the_Getters" class="example passed"><strong>Using a Capacity with the Getters</strong></p>
<p>For invoking a function implemented by a skill, the two following steps must be done:</p>
<ul>
  <li>Retrieve the skill instance: the function  <code>getSkill(Class&lt;? extends Capacity&gt;)</code>  permits retrieving the skill associated to the  given capacity;</li>
  <li>Invoke the capacity's action on the retrieved skill.</li>
</ul>
<p><span class="label label-info">Note</span> This method of invocation is not recommended by the SARL developers. You should prefer the use of the extension methods (see below).</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  on SomeEvent {
    // Retreive the capacity implementation
    var s = getSkill(Cap)
    // Run the action of the skill
    s.action
  }
}</pre>
</li>
<li>
<p id="Using_a_Capacity_with_the_Extension_Methods" class="example passed"><strong>Using a Capacity with the Extension Methods</strong></p>
<p>Invoking a capacity/skill with the getter method is not user-friendly. Since the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a> describes the "extension method" mechanism, it is possible to use it for invoking the capacities.</p>
<p>But, instead of using an <code>import</code> directive, the <code>uses</code> keyword is provided for importing the capacities into the agent. In the following example, the <code>Cap</code> capacity is imported.</p>
<p>After a capacity was "imported", it is possible to directly call the functions of the capacity (according to the extension method syntax). In the following example, the action with the name <code>action</code> is invoked. This action is defined in the <code>Cap</code> capacity.</p>
<pre class="prettyprint lang-spec linenums">
behavior MyBehavior {
  uses Cap
  on SomeEvent {
    // Run the action of the skill
    action
  }
}</pre>
</li>
</ul>
<ul><li>
<p id="Legal_Notice" class="example passed"><strong>Legal Notice</strong></p>
<p>Specification: SARL General-purpose Agent-Oriented Programming Language ("Specification")<br> Version: 0.1<br> Status: Draft Release<br> Release: 2014-08-26</p>
<p>Copyright © 2014 Sebastian RODRIGUEZ, Nicolas GAUD, Stéphane GALLAND. All rights reserved.</p>
</li></ul>
							<div>
<hr>
<p><small>SARL Documentation is generated by <a href="http://www.jnario.org" target="_blank">Jnario</a></small></p>
</div>
</div>
<div class="container">
  <!-- FOOTER -->
  <footer>
    <div class="row">
      
    <div class="col-lg-3">
    <div class="well well-sm">
      
      <center>
      <h2>SARL</h2>
      <div>Agent-Oriented Programming Language</div>
      <img src="../../../../images/SARL-logo.png" style="width:30%;max-width:64px;"><br>
      <small><a href="../../../../images/SARL-logo.png">png</a> · <a href="../../../../images/SARL-logo.svg">svg</a></small>
      </center>
    </div>
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2>
<i class="glyphicon glyphicon-th-large"></i> Quick Links </h2> 
      <ul>
        <li><a href="../../../../news/index.html">SARL News</a></li>
        <li><a href="../../../../about/index.html">About SARL</a></li>
        <li><a href="../../../../about/index.html">License</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2>
<i class="glyphicon glyphicon-cog"></i> Support</h2>
      <ul>
        <li><a href="http://github.com/sarl/sarl">View on Github</a></li>
        <li><a href="http://github.com/sarl/sarl/issues">Report an Issue</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2>
<i class="glyphicon glyphicon-link"></i> Links</h2>
      <ul>
        <li><a href="http://www.janusproject.io">Janus Project</a></li>
        <li><a href="http://www.gitia.org">GITIA - FRT - UTN</a></li>
        <li><a href="http://www.multiagent.fr">MAS Group - IRTES - UTBM</a></li>
      </ul>
      </div> 
    </div>
    </div>
    
  </footer>
</div>
</body>
</html>
