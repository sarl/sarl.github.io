<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="SARL is a general-purpose agent-oriented language.
SARL aims at providing the fundamental abstractions for dealing with concurrency, distribution, interaction, decentralization, reactivity, autonomy and dynamic reconfiguration. These high-level features are now considered as the major requirements for an easy and practical implementation of modern complex software applications. We are convinced that the agent-oriented paradigm holds the keys to effectively meet this challenge.
Considering the variety of existing approaches and meta-models in the field of agent-oriented engineering and more generally multi-agent systems, our approach remains as generic as possible and highly extensible to easily integrate new concepts and features. The language is platform- and architecture-independent.
">
    <meta name="author" content="SARL Team">
    <link rel="icon" href="../../../../../../images/favicon.ico" />
    <link rel="shortcut icon" href="../../../../../../images/favicon.ico">

    <title>Built-in Capacity Reference</title>

    <!-- Bootstrap core CSS -->
    <link href="../../../../../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../../../../../css/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    

<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.sarl.io">SARL</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="../../../../../../index.html">Home</a></li>
        <li><a href="../../../../../../docs/index.html">Documentation</a></li>
        <li><a href="../../../../../../download/index.html">Download</a></li>
        <li><a href="../../../../../../runtime/index.html">Run-time</a></li>
        <li><a href="../../../../../../community/index.html">Community</a></li>
        <li><a href="../../../../../../news/index.html">News &amp; Events</a></li>
        <li><a href="../../../../../../publications/index.html">Publications &amp; Presentations</a></li>
        <li><a href="../../../../../../about/index.html">About</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

    <div class="container">
      <div class="tab-pane active" id="spec">
<p></p>
<ul class="page_outline" id="page_outline">
<li><a href="#Logging">1. Logging</a></li>
<li><a href="#ExternalContextAccess">2. ExternalContextAccess</a></li>
<li><a href="#InnerContextAccess">3. InnerContextAccess</a></li>
<li><a href="#DefaultContextInteractions">4. DefaultContextInteractions</a></li>
<li><a href="#Lifecycle">5. Lifecycle</a></li>
<li><a href="#Schedules">6. Schedules</a></li>
<li><a href="#Behaviors">7. Behaviors</a></li>
<li><a href="#Use_of_the_Built_in_Capacities">8. Use of the Built-in Capacities</a></li>
<li><a href="#Legal_Notice">9. Legal Notice</a></li>
</ul>
<p>This document describes the built-in capacities in SARL. Before reading this document, it is recommended reading the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, the <a href="CapacityReferenceSpec.html">Capacity Reference</a>, and the <a href="SkillReferenceSpec.html">Skill Reference</a>.</p>
<p>A <em>Capacity</em> is the specification of a collection of actions. This specification makes no assumptions about its implementation. It could be used to specify what an agent can do, what a behavior requires for its execution.</p>
<p>A <em>Skill</em> is a possible implementation of a capacity fulfilling all the constraints of this specification.</p>
<p>In SARL, every agent has a set of <em>built-in capacities</em> considered essential to respect the commonly accepted competencies of agents. These capacities are considered the main building blocks on top of which other higher level capacities and skills can be constructed. They are defined in the SARL language, but the skills implementing them are provided by the runtime environment, e.g. the <a href="http://www.janus-project.io">Janus platform</a>. This runtime environment is responsible for creating them and injecting them in the agent before their execution begins. Therefore, when the agent receives the <code>Initialize</code> event they are already available.</p>
<p>The following figure presents the different contexts associated to an agent <code>A</code>. Several built-in capacities permit accessing and manage these contexts. The agents are represented by stylized humans, the contexts by the blue boxes, and the spaces by the small color boxes in the contexts.</p>
<p><img src="./contexts.png" alt="Contexts"></p>
<h3 id="Logging">1. Logging</h3>
<p>The built-in capacity <code>Logging</code> provides tools for printing messages in the log associated to the agent.</p>
<h4 id="Print_an_error_or_a_warning_message">1.1. Print an error or a warning message</h4>
<p>For printing an error or a warning message, the two following functions are provided:</p>
<pre class="prettyprint">def error(message : Object, exception : Throwable = null)
def warning(message : Object, exception : Throwable = null)
</pre>
<p>The <code>message</code> parameter is converted to a string for obtaining the message to output. The <code>exception</code> parameter may be given for printing an exception that is the cause of the logging action.</p>
<h4 id="Print_an_information_message">1.2. Print an information message</h4>
<p>For printing an information message, the two following functions are provided:</p>
<pre class="prettyprint">def info(message : Object)
def println(message : Object)
</pre>
<p>The <code>message</code> parameter is converted to a string for obtaining the message to output. There is no difference between these two functions. The function <code>println</code> is provided for backward compatibility, and will be deprecated in further versions of the capacity.</p>
<h4 id="Print_a_debugging_message">1.3. Print a debugging message</h4>
<p>For printing a debugging message, the following function is provided:</p>
<pre class="prettyprint">def debug(message : Object)
</pre>
<p>The <code>message</code> parameter is converted to a string for obtaining the message to output.</p>
<h4 id="Retrieve_and_change_the_logging_level">1.4. Retrieve and change the logging level</h4>
<p>The printable messages are associated to a level of logging (error, warning, info, debug). If a message is given to the logging system, and the current output level is lower than the message's level, then the message is not output.</p>
<p>For retrieving the current logging level, the following function is provided:</p>
<pre class="prettyprint">def getLogLevel : int
</pre>
<p>The replied value is 0 when no message is printed, 1 if only error messages are printed, 2 for error and warning messages, etc.</p>
<p>For changing the current logging level, the following function is provided:</p>
<pre class="prettyprint">def setLogLevel(level : int)
</pre>
<h4 id="Testing_the_logging_level">1.5. Testing the logging level</h4>
<p>The following functions permits testing if a specific logging level is enabled:</p>
<pre class="prettyprint">def isErrorLogEnabled : boolean
def isWarningLogEnabled : boolean
def isInfoLogEnabled : boolean
def isDebugLogEnabled : boolean
</pre>
<h4 id="Change_the_name_of_the_logger">1.6. Change the name of the logger</h4>
<p>By default, the logging message contains the identifier of the agent associated to the <code>Logging</code> capacity.</p>
<p>Sometimes, it is helpful to change the printed name of the agent. The following function gives the opportunity to change this name.</p>
<pre class="prettyprint">def setLoggingName(name : String)
</pre>
<h3 id="ExternalContextAccess">2. ExternalContextAccess</h3>
<p>The built-in capacity <code>ExternalContextAccess</code> provides access to the <a href="SpaceReferenceSpec.html">context</a> that the agent is a part of, and actions required to join new <a href="SpaceReferenceSpec.html">contexts</a>, and leave them.</p>
<p>The context supported by this built-in capacity is the "external context," illustrated by the top-right context in the figure above.</p>
<h4 id="Retrieving_a_Context">2.1. Retrieving a Context</h4>
<p>For retrieving the context with a particular ID, this built-in capacity provides the following function:</p>
<pre class="prettyprint">def getContext(contextID : UUID) : AgentContext
</pre>
<p>The agent must have joined (see below) the context before calling this action. Or, the agent may use its <code>parentContextID</code> for accessing the context in which it is located (the default context).</p>
<h4 id="Retrieving_the_Contexts_of_an_Agent">2.2. Retrieving the Contexts of an Agent</h4>
<p>The following function enables an agent to retrieve all the contexts in which it is involved:</p>
<pre class="prettyprint">def getAllContexts : SynchronizedCollection&lt;AgentContext&gt;
</pre>
<p>The default context is included in the replied collection.</p>
<h4 id="Joining_an_Existing_Context">2.3. Joining an Existing Context</h4>
<p>Agents must be able to join a new parent context. The following function gives this capability to them:</p>
<pre class="prettyprint">def join(contextID : UUID, expectedDefaultSpaceID : UUID)
</pre>
<p>This action registers the agent in the default space of the context.</p>
<p>The agent will be involved in the context with the ID given by <code>contextID</code>. The parameter <code>expectedDefaultSpaceID</code> is only used to check if the caller of this function knows the ID of the default space in the context to be involved in. If the given <code>expectedDefaultSpaceID</code> does not match the ID of the default space in the context <code>contextID</code>, then the access to the context is forbidden.</p>
<p><span class="label label-warning">Important</span> The context must already exist, and the default space inside this context must have the same ID as <code>expectedDefaultSpaceID</code>.</p>
<p>This action fires two events:</p>
<ul>
  <li>
<code>ContextJoined</code> in the inner context's default space.</li>
  <li>
<code>MemberJoined</code> in the parent context's default space.</li>
</ul>
<h4 id="Leaving_a_Context">2.4. Leaving a Context</h4>
<p>When an agent wants to leave a context, it must invoke:</p>
<pre class="prettyprint">def leave(contextID : UUID)
</pre>
<p>This action fires two events:</p>
<ul>
  <li>
<code>ContextLeft</code> in the inner context's default space.</li>
  <li>
<code>MemberLeft</code> in the parent context's default space.</li>
</ul>
<h4 id="Testing_if_an_element_is_related_to_an_external_context">2.5. Testing if an element is related to an external context</h4>
<p>The <code>ExternalContextAccess</code> provides a collection of utility functions that test if their parameters are related to the any external context.</p>
<table class="table-bordered">
<thead><tr>
<th>Function</th>
<th>Explanation</th>
</tr></thead>
<tbody>
<tr>
<td><code>isInSpace(Event, Space)</code></td>
<td>tests if the given event was emitted in
the given space.</td>
</tr>
<tr>
<td><code>isInSpace(Event, SpaceID)</code></td>
<td>tests if the given event was emitted in
the space with the given identifier.</td>
</tr>
<tr>
<td><code>isInSpace(Event, UUID)</code></td>
<td>tests if the given event was emitted in
the space with the given identifier.</td>
</tr>
</tbody>
</table>
<p>The following example illustrates the use of the <code>isInSpace</code> function in the guard of an behavior unit. In this example, the behavior unit is run only if the event of type <code>AnEvent</code> was emitted in the space <code>myspace</code> (declared as attribute in the container).</p>
<pre class="prettyprint lang-spec linenums">on AnEvent [ isInSpace(occurrence, myspace) ] {
  // Do something with the event when it was emitted in the space myspace
}</pre>
<h3 id="InnerContextAccess">3. InnerContextAccess</h3>
<p>The built-in capacity <code>InnerContextAccess</code> provides access to the inner context of the agent. This is a key feature for creating holonic agent implementation. The context supported by this built-in capacity is the "inner context," illustrated by the bottom context in the figure above.</p>
<h4 id="Retrieving_the_Inner_Context">3.1. Retrieving the Inner Context</h4>
<p>For retrieving the inner context of an agent, this built-in capacity provides the following function:</p>
<pre class="prettyprint">def getInnerContext : AgentContext
</pre>
<h4 id="Members_of_an_Agent">3.2. Members of an Agent</h4>
<p>For retrieving information on the member agents of the current agent, several functions are provided by this built-in capacity. A member agent is an agent that is not the calling agent, and is a member of at least one space of the inner context.</p>
<p>The first function replies if the calling agent has other agents as members of its inner context:</p>
<pre class="prettyprint">def hasMemberAgent : boolean
</pre>
<p>The second function replies the number of agents that are members of the inner context of the calling agent:</p>
<pre class="prettyprint">def getMemberAgentCount : int
</pre>
<p>The third function replies all the member agents in the inner context:</p>
<pre class="prettyprint">def getMemberAgents : SynchronizedSet&lt;UUID&gt;
</pre>
<h4 id="Testing_if_an_element_is_related_to_the_inner_context">3.3. Testing if an element is related to the inner context</h4>
<p>The <code>InnerContextAccess</code> provides a collection of utility functions that test if their parameters are related to the inner context.</p>
<table class="table-bordered">
<thead><tr>
<th>Function</th>
<th>Explanation</th>
</tr></thead>
<tbody>
<tr>
<td><code>isInnerDefaultSpace(Space)</code></td>
<td>tests if the given space is the
default space of the inner context.</td>
</tr>
<tr>
<td><code>isInnerDefaultSpace(SpaceID)</code></td>
<td>tests if the default space of
the inner context has the given identifier.</td>
</tr>
<tr>
<td><code>isInnerDefaultSpace(UUID)</code></td>
<td>tests if the default space of
the inner context has the given identifier.</td>
</tr>
<tr>
<td><code>isInInnerDefaultSpace(Event)</code></td>
<td>tests if the given event was emitted in
the default space of the inner context.</td>
</tr>
</tbody>
</table>
<p>The following example illustrates the use of the <code>isInInnerDefaultSpace</code> function in the guard of an behavior unit. In this example, the behavior unit is run only if the event of type <code>AnEvent</code> was emitted in the default space of the inner context.</p>
<p><span class="label label-info">Note</span> According to the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, the <code>event.inInnerDefaultSpace</code> is equivalent to <code>isInInnerDefaultSpace(event)</code>.</p>
<pre class="prettyprint lang-spec linenums">on AnEvent [ occurrence.inInnerDefaultSpace ] {
  // Do something with the event when it was emitted in the inner default space
}</pre>
<h3 id="DefaultContextInteractions">4. DefaultContextInteractions</h3>
<p>The <code>DefaultContextInteractions</code> capacity is actually provided for convenience. It assumes that the action will be performed on the agent <strong>default context</strong> or its <strong>default space</strong>. These context and space are illustrated by the top-left context in the figure above.</p>
<p>For instance, the <code>emit</code> action is a shortcut for:</p>
<pre class="prettyprint">defaultContext.defaultSpace.emit(...)
</pre>
<p>Therefore, it is actually created on top of the other built-in capacities.</p>
<h4 id="Retrieving_the_Default_Context_and_Space">4.1. Retrieving the Default Context and Space</h4>
<p>For retrieving the default context of an agent, this built-in capacity provides the following function:</p>
<pre class="prettyprint">def getDefaultContext : AgentContext
</pre>
<p>For retrieving the default space in the default context of an agent, this built-in capacity provides the following function:</p>
<pre class="prettyprint">def getDefaultSpace : EventSpace
</pre>
<p>For obtaining the address of the agent in the default space, the following function is provided:</p>
<pre class="prettyprint">def getDefaultAddress : Address
</pre>
<h4 id="Spawning_an_Agent">4.2. Spawning an Agent</h4>
<p>Many time, it is useful for agent to create a new agent into the default context. The following function is provided for this task:</p>
<pre class="prettyprint">def spawn(agentType : Class&lt;? extends Agent&gt;, params : Object[]) : UUID
</pre>
<p>This action creates an instance of the given agent type, and launches the agent into the default context. The parameters are passed to the spawned agent inside the <code>Initialize</code> event: the <code>parameters</code> field.</p>
<p>This action fires two events:</p>
<ul>
  <li>
<code>AgentSpawned</code> in the default space of the default context. The source of the event is this spawner.</li>
  <li>
<code>Initialize</code> in spawned agent.</li>
</ul>
<h4 id="Sending_an_Event_in_the_Default_Space">4.3. Sending an Event in the Default Space</h4>
<p>The core mechanism for information exchanges among agents is <a href="EventReferenceSpec.html">event-based</a>. For sending an event in the default space of the default context, the following function is provided:</p>
<pre class="prettyprint">def emit(e : Event)
</pre>
<p>This function emits the given event with no scope (i.e., all registered agent will receive the event) in the default space of the default context.</p>
<p>It is equivalent to:</p>
<pre class="prettyprint">defaultContext.defaultSpace.emit(e)
</pre>
<h4 id="Sending_an_Event_to_Specific_Agents_in_the_Default_Space">4.4. Sending an Event to Specific Agents in the Default Space</h4>
<p>The previous sending function assumes that there is no restriction on the set of the receivers of the event. It is possible to specify a <code>Scope</code> for applying a restriction.</p>
<pre class="prettyprint">def emit(e : Event, scope : Scope&lt;Address&gt;)
</pre>
<p>A scope is a predicates that is evaluated against the addresses of the receivers. It is defined as (in Java):</p>
<pre class="prettyprint">public interface Scope&lt;T&gt; extends Serializable {
    public boolean matches(T element);
}
</pre>
<p>It is recommended using the SARL utility functions for creating scopes. They are defined in the class <code>io.sarl.util.Scopes</code>. The following example is equivalent to the feature call of <code>emit</code> without the scoping parameter:</p>
<pre class="prettyprint">emit(new Event, Scopes::allParticipants)
</pre>
<p>A default implementation of a scope using addresses is implemented in the Java class <code>io.sarl.util.AddressScope</code>. The utility class <code>Scopes</code> provides the <code>addresses</code> function for creating an instance of <code>AddressScope</code>.</p>
<pre class="prettyprint">emit(new Event, Scopes::addresses(a1, a2))
</pre>
<p>You are free to create new implementation of <code>Scope</code> in order to filter the receivers of an event according to your own criteria.</p>
<h4 id="Testing_if_an_element_is_related_to_the_default_context">4.5. Testing if an element is related to the default context</h4>
<p>The <code>DefaultContextInteractions</code> provides a collection of utility functions that test if their parameters are related to the default context or the default space.</p>
<table class="table-bordered">
<thead><tr>
<th>Function</th>
<th>Explanation</th>
</tr></thead>
<tbody>
<tr>
<td><code>isDefaultContext(AgentContext)</code></td>
<td>tests if the given context is the default
context.</td>
</tr>
<tr>
<td><code>isDefaultContext(UUID)</code></td>
<td>tests if the default context has the given
identifier.</td>
</tr>
<tr>
<td><code>isDefaultSpace(Space)</code></td>
<td>tests if the given space is the default
space of the default context.</td>
</tr>
<tr>
<td><code>isDefaultSpace(UUID)</code></td>
<td>tests if the default space of the
default context has the given identifier.</td>
</tr>
<tr>
<td><code>isInDefaultSpace(Event)</code></td>
<td>tests if the given event was emitted
in the default space of the default context.</td>
</tr>
</tbody>
</table>
<p>The following example illustrates the use of the <code>isInDefaultSpace</code> function in the guard of an behavior unit. In this example, the behavior unit is run only if the event of type <code>AnEvent</code> was emitted in the default space.</p>
<p><span class="label label-info">Note</span> According to the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>, the <code>event.inDefaultSpace</code> is equivalent to <code>isInDefaultSpace(event)</code>.</p>
<pre class="prettyprint lang-spec linenums">on AnEvent [ occurrence.inDefaultSpace ] {
  // Do something with the event when it was emitted in the default space
}</pre>
<h3 id="Lifecycle">5. Lifecycle</h3>
<p>The built-in capacity <code>Lifecycle</code> provides actions for spawning new agents on different external contexts and the inner context, as well as the <code>killMe</code> action to stop the execution of an agent.</p>
<h4 id="Stopping_the_Agent_Execution">5.1. Stopping the Agent Execution</h4>
<p>Because of the autonomy property of an agent, it can be stopped only by committing a suicide. It means that it is impossible to stop an agent from another agent: the agent to stop must be able to accept or reject this query.</p>
<p>The <code>Lifecycle</code> capacity provides the following function for committing a suicide:</p>
<pre class="prettyprint">def killMe
</pre>
<p>This action automatically unregisters the calling agent from the default context, and therefore all its spaces including the default space.</p>
<p><span class="label label-danger">Important</span> If the killed agent was a composed agent, it must not have members any more before calling this action, otherwise a <code>RuntimeException</code> is thrown.</p>
<p>This action fires two events:</p>
<ul>
  <li>
<code>AgentKilled</code> in the default space of all contexts to which the calling agent belongs.</li>
  <li>
<code>Destroy</code> inside the killed agent agent.</li>
</ul>
<h4 id="Spawning_an_Agent">5.2. Spawning an Agent</h4>
<p>Many time, it is useful for an agent to create a new agent into a given context. The following function is provided for this task:</p>
<pre class="prettyprint">def spawnInContext(agentType : Class&lt;? extends Agent&gt;,
                   context : AgentContext,
                   params : Object[]) : UUID
</pre>
<p>This action creates an instance of the given agent type, and launches the agent into the given context. The parameters are passed to the spawned agent inside the <code>Initialize</code> event: the <code>parameters</code> field.</p>
<p>This action fires two events:</p>
<ul>
  <li>
<code>AgentSpawned</code> in the default space of the context. The source of the event is the calling agent.</li>
  <li>
<code>Initialize</code> in spawned agent.</li>
</ul>
<h4 id="Spawning_an_Agent_with_a_specific_identifier">5.3. Spawning an Agent with a specific identifier</h4>
<p>Some time, it is useful to create an agent with a specific identifier. The following function permits to spawn an agent with a given identifier in a specific context:</p>
<pre class="prettyprint">def spawnInContextWithID(agentType : Class&lt;? extends Agent&gt;,
                         agentId : UUID,
                         context : AgentContext,
                         params : Object[]) : UUID
</pre>
<p>This action creates an instance of the given agent type, with the given identifier, and launches the agent into the given context. The parameters are passed to the spawned agent inside the <code>Initialize</code> event: the <code>parameters</code> field.</p>
<p>This action fires two events:</p>
<ul>
  <li>
<code>AgentSpawned</code> in the default space of the context. The source of the event is the calling agent.</li>
  <li>
<code>Initialize</code> in spawned agent.</li>
</ul>
<h3 id="Schedules">6. Schedules</h3>
<p>The built-in capacity <code>Schedules</code> enables the agent to schedule tasks for future or periodic execution.</p>
<h4 id="Creating_Named_Tasks">6.1. Creating Named Tasks</h4>
<p>A named task may be created with:</p>
<pre class="prettyprint">def task(name : String) : AgentTask
</pre>
<p>The replied task may be used for future execution, or controlling the execution.</p>
<h4 id="Launching_a_Delayed_Task">6.2. Launching a Delayed Task</h4>
<p>For running a task in a given delay, the following functions are provided:</p>
<pre class="prettyprint">def in(delay : long,
       procedure : (Agent) =&gt; void) : AgentTask
def in(task : AgentTask,
       delay : long,
       procedure : (Agent) =&gt; void) : AgentTask
</pre>
<p>The first function submits the given procedure (a lambda expression as defined in the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>) to an executor provided by the runtime platform. The execution of the procedure will be delayed during the given number of milliseconds. This function replies the agent task for controlling its execution.</p>
<p>The second function behaves in a similar way as the first, except that it accepts an agent task as parameter. This task will attach to the given procedure. The replied task is the same as the task given as parameter.</p>
<h4 id="Launching_a_Periodic_Task">6.3. Launching a Periodic Task</h4>
<p>For running a periodic task, the following functions are provided:</p>
<pre class="prettyprint">def every(period : long,
          procedure : (Agent) =&gt; void) : AgentTask
def every(period : AgentTask,
          delay : long,
          procedure : (Agent) =&gt; void) : AgentTask
</pre>
<p>The first function submits the given procedure (a lambda expression as defined in the <a href="GeneralSyntaxReferenceSpec.html">General Syntax Reference</a>) to an executor provided by the runtime platform. The execution of the procedure will be launched periodically with a period of the given number of milliseconds. This function replies the agent task for controlling its execution.</p>
<p>The second function behaves in a similar way as the first, except that it accepts an agent task as parameter. This task will attach to the given procedure. The replied task is the same as the task given as parameter.</p>
<p>If the duration of the task is greater to the given period length, then multiple task's instances will be run in parallel. For example, consider the following code:</p>
<pre class="prettyprint">every(500) [ sleep(2000) ]
</pre>
<p>At a given time, four instances of the task are run in parallel (A, B, C, D for example):</p>
<table class="table-bordered">
<thead>
<tr>
<th>t=</th>
<th>0</th>
<th>500</th>
<th>1000</th>
<th>1500</th>
<th>2000</th>
<th>2500</th>
<th>3000</th>
<th>3500</th>
<th>4000</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>B</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>D</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>E</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>F</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
</tbody>
</table>
<h4 id="Cancelling_a_Task">6.4. Cancelling a Task</h4>
<p>It may be useful to cancel a running task, e.g. a periodic task. The <code>Schedules</code> capacity provides two functions for stopping the execution of an agent task:</p>
<pre class="prettyprint">def cancel(task : AgentTask) : boolean
def cancel(task : AgentTask,
           mayInterruptIfRunning : boolean) : boolean
</pre>
<p>These functions will reply <code>false</code> if the task has already completed, has already been cancelled, or could not be cancelled for some other reason (a failure means replying false). If successful, and this task has not started when <code>cancel</code> is called, this task should never run. If the task has already started, then the <code>mayInterruptIfRunning</code> parameter determines whether the thread executing this task should be interrupted in an attempt to stop the task.</p>
<p>The first function interrupts ongoing tasks. So, it is equivalent to passing <code>true</code> as the value for the parameter <tt>mayInterruptIfRunning</tt> to the function <code>cancel(AgentTask, boolean)</code>.</p>
<h3 id="Behaviors">7. Behaviors</h3>
<p>The built-in capacity <code>Behaviors</code> provides the tools to the agents for dynamically registering and unregistering sub-behaviors.</p>
<p>This capacity is closely related to the <code>InnerContextAccess</code> for enabling a high-level abstraction for holonic multi-agent system development.</p>
<p>The definition of a behavior is not detailed in this reference document. Please read the <a href="BehaviorReferenceSpec.html">Behavior Reference</a> for details.</p>
<h4 id="Registering_a_Behavior">7.1. Registering a Behavior</h4>
<p>Assuming that a behavior was already defined, it is possible for an agent to register this behavior:</p>
<pre class="prettyprint">def registerBehavior(attitude : Behavior) : Behavior
</pre>
<p>This function takes the behavior to be registered, and replies the same behavior. When a behavior is registered, it is receiving the events in the default space of the inner context of the agent, or received by the agent itself.</p>
<h4 id="Unregistering_a_Behavior">7.2. Unregistering a Behavior</h4>
<p>Assuming that a behavior was already registered, it is possible for an agent to unregister it:</p>
<pre class="prettyprint">def unregisterBehavior(attitude : Behavior) : Behavior
</pre>
<p>This function takes the behavior to be unregistered, and replies the same behavior. When a behavior is unregistering, it is no more receiving the events in the default space of the inner context of the agent, and the ones received by the agent itself.</p>
<h4 id="Executing_a_Behavior">7.3. Executing a Behavior</h4>
<p>A behavior is executed through its event handlers. Consequently, for running a behavior, it is mandatory to wake it with an event. This particular feature is supported by:</p>
<pre class="prettyprint">def wake(evt : Event)
</pre>
<p>This function emits the given event into the inner context of the agent (in the default space).</p>
<p><span class="label label-warning">Important</span> It is not possible to execute a particular behavior explicitly. All the behaviors that are waiting for a given event will be executed by this function.</p>
<h4 id="Creating_an_Event_Listener">7.4. Creating an Event Listener</h4>
<p>Sometimes, it is useful or mandatory for an agent to listen on the events in a given space. The following function permits retrieving the event listener of the agent:</p>
<pre class="prettyprint">def asEventListener : EventListener
</pre>
<p>The listener replied by this function is the one used by the agent (and its behaviors) for listening events related to all the contexts (default, external, and inner).</p>
<h3 id="Use_of_the_Built_in_Capacities">8. Use of the Built-in Capacities</h3>
<p>Details on the use of the built-in capacities may be found in the references of the major behavior-based concepts of SARL:</p>
<ul>
  <li><a href="AgentReferenceSpec.html">Agent</a></li>
  <li><a href="BehaviorReferenceSpec.html">Behavior</a></li>
</ul>
<h3 id="Legal_Notice">9. Legal Notice</h3>
<p>Specification: SARL General-purpose Agent-Oriented Programming Language ("Specification")<br> Version: 1.0<br> Status: Draft Release<br> Release: 2015-10-26</p>
<p>Copyright © 2015 Sebastian RODRIGUEZ, Nicolas GAUD, Stephane GALLAND. All rights reserved.</p>
<p>Licensed under the Apache License, Version 2.0; you may not use this file except in compliance with the License. You may obtain a copy of the <a href="http://www.apache.org/licenses/LICENSE-2.0">License</a>.</p>
							</div>
<hr/><p><small>SARL Documentation is generated by <a href='http://www.jnario.org' target='_blank'>Jnario</a></small></p>
    </div> <!-- /default layout container -->

    <div class="container">
  <!-- FOOTER -->
  <footer>
    <div class="row">
      
    <div class="col-lg-3">
    <div class="well well-sm">
      
      <center>
      <h2>SARL</h2>
      <div>Agent-Oriented Programming Language</div>
      <img src="../../../../../../images/SARL-logo.png" style="width:30%;max-width:64px;"/><br/>
      <small><a href="../../../../../../images/SARL-logo.png">png</a>&nbsp;&middot;&nbsp;<a href="../../../../../../images/SARL-logo.svg">svg</a></small>
      </center>
    </div>
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2><i class="glyphicon glyphicon-th-large"></i> Quick Links </h2> 
      <ul>
        <li><a href="../../../../../../news/index.html">SARL News</a></li>
        <li><a href="../../../../../../about/index.html">About SARL</a></li>
        <li><a href="../../../../../../about/index.html">License</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2><i class="glyphicon glyphicon-cog"></i> Support</h2>
      <ul>
        <li><a href="http://github.com/sarl/sarl">View on Github</a></li>
        <li><a href="http://github.com/sarl/sarl/issues">Report an Issue</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2><i class="glyphicon glyphicon-link"></i> Links</h2>
      <ul>
        <li><a href="http://www.janusproject.io">Janus Project</a></li>
        <li><a href="http://www.gitia.org">GITIA - FRT - UTN</a></li>
        <li><a href="http://www.multiagent.fr">MAS Group - IRTES - UTBM</a></li>
      </ul>
      </div> 
    </div>
    </div>
    
  </footer>
</div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
  </body>
</html>
