<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="SARL is a general-purpose agent-oriented language.
SARL aims at providing the fundamental abstractions for dealing with concurrency, distribution, interaction, decentralization, reactivity, autonomy and dynamic reconfiguration. These high-level features are now considered as the major requirements for an easy and practical implementation of modern complex software applications. We are convinced that the agent-oriented paradigm holds the keys to effectively meet this challenge.
Considering the variety of existing approaches and meta-models in the field of agent-oriented engineering and more generally multi-agent systems, our approach remains as generic as possible and highly extensible to easily integrate new concepts and features. The language is platform- and architecture-independent.
">
    <meta name="author" content="SARL Team">
    <link rel="icon" href="../../../../../../images/favicon.ico" />
    <link rel="shortcut icon" href="../../../../../../images/favicon.ico">

    <title>Event Creation with a Builder</title>

    <link rel="stylesheet" href="../../../../../../css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../../../css/custom.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    

<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.sarl.io">SARL</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="../../../../../../index.html">Home</a></li>
        <li><a href="../../../../../../docs/index.html">Documentation</a></li>
        <li><a href="../../../../../../download/index.html">Download</a></li>
        <li><a href="../../../../../../runtime/index.html">Run-time</a></li>
        <li><a href="../../../../../../community/index.html">Community</a></li>
        <li><a href="../../../../../../news/index.html">News &amp; Events</a></li>
        <li><a href="../../../../../../publications/index.html">Publications &amp; Presentations</a></li>
        <li><a href="../../../../../../about/index.html">About</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

    <div class="container">
      <div class="tab-pane active" id="spec">
<p></p>
<ul class="page_outline" id="page_outline">
<li><a href="#Definition_of_the_event">1. Definition of the event</a></li>
<li><a href="#Definition_of_the_event_builder">2. Definition of the event builder</a></li>
<li><a href="#Use_of_the_event_builder">3. Use of the event builder</a></li>
<li><a href="#Legal_Notice">4. Legal Notice</a></li>
</ul>
<p>This document describes the basics of the creation of events with a builder. In some cases, each event must have a unique identifier. But because static fields are not allowed in the event definitions, it is impossible to store the next available event ID in a static field. The best way for creating events with unique identifiers is to apply the <a href="https://en.wikipedia.org/wiki/Software_design_pattern">builder design pattern</a>.</p>
<p>The elements that are explained in this document are:</p>
<ul>
  <li>the definition of an event;</li>
  <li>the definition of an event builder;</li>
  <li>the use of the event builder.</li>
</ul>
<h3 id="Definition_of_the_event">1. Definition of the event</h3>
<p>The purpose of this document is to create an event, which has a unique identifier. This identifier is an integer number that should be incremented each time an event instance is created.</p>
<p>The definition of the event should define the event with a read-only identifier (<code>val</code>). Because the identifier is a value, it must be initialize in the constructor of the event. Consequently, a constructor is defined with the identifier value as parameter.</p>
<pre class="prettyprint lang-sarl linenums">package io.sarl.docs.bestpractices.eventbuilder
event MyEvent {
  val id : long
  new(id : long) {
    this.id = id
  }
}</pre>
<h3 id="Definition_of_the_event_builder">2. Definition of the event builder</h3>
<p>For creating the event instances, we apply the <a href="https://en.wikipedia.org/wiki/Software_design_pattern">builder design pattern</a></p>
<p>A builder is a class that is able to create an instance of the event when it is invoked. The next available unique identifier for the events is stored into a field of the builder (<code>id</code>).</p>
<p>The function <code>newInstance</code> is defined for creating an instance of the event. This function gets the next available global identifier to give it to the event instance, and it increments the next available global identifier for the next call to <code>newInstance</code>. Finally, the <code>newInstance</code> function create the event instance with the appropriate identifier.</p>
<pre class="prettyprint lang-sarl linenums">class MyEventBuilder {
  private var id : long = 0
  def newInstance : MyEvent {
    val eventId = id
    id++
    return new MyEvent(eventId)
  }
}</pre>
<h3 id="Use_of_the_event_builder">3. Use of the event builder</h3>
<p>For using the event builder, you have simply to create an instance of the <code>MyEventBuilder</code> class, and use it as follow (two events are created in the example):</p>
<pre class="prettyprint lang-sarl linenums">val builder = new MyEventBuilder
var event1 = builder.newInstance
var event2 = builder.newInstance</pre>
<h3 id="Legal_Notice">4. Legal Notice</h3>
<p>Specification: SARL General-purpose Agent-Oriented Programming Language ("Specification")<br> Version: 0.5<br> Status: Stable Release<br> Release: 2017-03-18</p>
<p>Copyright © 2014-2017 the original authors or authors.</p>
<p>Licensed under the Apache License, Version 2.0; you may not use this file except in compliance with the License. You may obtain a copy of the <a href="http://www.apache.org/licenses/LICENSE-2.0">License</a>.</p>
							</div>
<hr/><p><small>The SARL Documentation is generated with <a href='http://www.jnario.org' target='_blank'>Jnario</a></small></p>
    </div> <!-- /default layout container -->

    <div class="container">
  <!-- FOOTER -->
  <footer>
    <div class="row">
      
    <div class="col-lg-3">
    <div class="well well-sm">
      
      <center>
      <h2>SARL</h2>
      <div>Agent-Oriented Programming Language</div>
      <img src="../../../../../../images/SARL-logo.png" style="width:30%;max-width:64px;"/><br/>
      <small><a href="../../../../../../images/SARL-logo.png">png</a>&nbsp;&middot;&nbsp;<a href="../../../../../../images/SARL-logo.svg">svg</a></small>
      </center>
    </div>
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2><i class="glyphicon glyphicon-th-large"></i> Quick Links </h2> 
      <ul>
        <li><a href="../../../../../../news/index.html">SARL News</a></li>
        <li><a href="../../../../../../about/index.html">About SARL</a></li>
        <li><a href="../../../../../../about/index.html">License</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2><i class="glyphicon glyphicon-cog"></i> Support</h2>
      <ul>
        <li><a href="http://github.com/sarl/sarl">View on Github</a></li>
        <li><a href="http://github.com/sarl/sarl/issues">Report an Issue</a></li>
      </ul>
      </div> 
    </div>
    <div class="col-lg-3">
      <div class="well well-sm">
      <h2><i class="glyphicon glyphicon-link"></i> Links</h2>
      <ul>
        <li><a href="http://www.janusproject.io">Janus Project</a></li>
        <li><a href="http://www.gitia.org">GITIA - FRT - UTN</a></li>
        <li><a href="http://www.multiagent.fr">MAS Group - IRTES - UTBM</a></li>
      </ul>
      </div> 
    </div>
    </div>
    
  </footer>
</div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../../../../../js/jquery.min.js"></script>
    <script src="../../../../../../js/bootstrap.min.js"></script>
    <script src="../../../../../../js/run_prettify.js"></script>
	<script src="../../../../../../js/lang-jnario.js"></script>
	<script src="../../../../../../js/lang-sarl.js"></script>
  </body>
</html>
